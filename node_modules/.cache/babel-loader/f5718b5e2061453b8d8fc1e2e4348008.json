{"ast":null,"code":"// eslint-disable-next-line @typescript-eslint/ban-ts-comment\n// @ts-nocheck\nimport MutableValue from './MutableValue';\nexport default class Mapper {\n  constructor(module, mapper, inputs = [], outputs = []) {\n    this.dirty = true;\n    this.id = Mapper.MAPPER_ID++;\n    this.inputs = this.extractMutablesFromArray(inputs);\n    this.outputs = this.extractMutablesFromArray(outputs);\n    this.mapper = mapper;\n\n    const markDirty = () => {\n      this.dirty = true;\n      module.maybeRequestRender();\n    };\n\n    this.inputs.forEach(input => {\n      input.addListener(markDirty);\n    });\n  }\n\n  execute() {\n    this.dirty = false;\n    this.mapper();\n  }\n\n  extractMutablesFromArray(array) {\n    const res = [];\n\n    function extractMutables(value) {\n      if (value instanceof MutableValue) {\n        res.push(value);\n      } else if (Array.isArray(value)) {\n        value.forEach(v => extractMutables(v));\n      } else if (typeof value === 'object') {\n        Object.keys(value).forEach(key => {\n          extractMutables(value[key]);\n        });\n      }\n    }\n\n    extractMutables(array);\n    return res;\n  }\n\n}\nMapper.MAPPER_ID = 1;","map":{"version":3,"sources":["/Users/hello/node_modules/react-native-reanimated/lib/reanimated2/js-reanimated/Mapper.js"],"names":["MutableValue","Mapper","constructor","module","mapper","inputs","outputs","dirty","id","MAPPER_ID","extractMutablesFromArray","markDirty","maybeRequestRender","forEach","input","addListener","execute","array","res","extractMutables","value","push","Array","isArray","v","Object","keys","key"],"mappings":"AAAA;AACA;AACA,OAAOA,YAAP,MAAyB,gBAAzB;AACA,eAAe,MAAMC,MAAN,CAAa;AACxBC,EAAAA,WAAW,CAACC,MAAD,EAASC,MAAT,EAAiBC,MAAM,GAAG,EAA1B,EAA8BC,OAAO,GAAG,EAAxC,EAA4C;AACnD,SAAKC,KAAL,GAAa,IAAb;AACA,SAAKC,EAAL,GAAUP,MAAM,CAACQ,SAAP,EAAV;AACA,SAAKJ,MAAL,GAAc,KAAKK,wBAAL,CAA8BL,MAA9B,CAAd;AACA,SAAKC,OAAL,GAAe,KAAKI,wBAAL,CAA8BJ,OAA9B,CAAf;AACA,SAAKF,MAAL,GAAcA,MAAd;;AACA,UAAMO,SAAS,GAAG,MAAM;AACpB,WAAKJ,KAAL,GAAa,IAAb;AACAJ,MAAAA,MAAM,CAACS,kBAAP;AACH,KAHD;;AAIA,SAAKP,MAAL,CAAYQ,OAAZ,CAAqBC,KAAD,IAAW;AAC3BA,MAAAA,KAAK,CAACC,WAAN,CAAkBJ,SAAlB;AACH,KAFD;AAGH;;AACDK,EAAAA,OAAO,GAAG;AACN,SAAKT,KAAL,GAAa,KAAb;AACA,SAAKH,MAAL;AACH;;AACDM,EAAAA,wBAAwB,CAACO,KAAD,EAAQ;AAC5B,UAAMC,GAAG,GAAG,EAAZ;;AACA,aAASC,eAAT,CAAyBC,KAAzB,EAAgC;AAC5B,UAAIA,KAAK,YAAYpB,YAArB,EAAmC;AAC/BkB,QAAAA,GAAG,CAACG,IAAJ,CAASD,KAAT;AACH,OAFD,MAGK,IAAIE,KAAK,CAACC,OAAN,CAAcH,KAAd,CAAJ,EAA0B;AAC3BA,QAAAA,KAAK,CAACP,OAAN,CAAeW,CAAD,IAAOL,eAAe,CAACK,CAAD,CAApC;AACH,OAFI,MAGA,IAAI,OAAOJ,KAAP,KAAiB,QAArB,EAA+B;AAChCK,QAAAA,MAAM,CAACC,IAAP,CAAYN,KAAZ,EAAmBP,OAAnB,CAA4Bc,GAAD,IAAS;AAChCR,UAAAA,eAAe,CAACC,KAAK,CAACO,GAAD,CAAN,CAAf;AACH,SAFD;AAGH;AACJ;;AACDR,IAAAA,eAAe,CAACF,KAAD,CAAf;AACA,WAAOC,GAAP;AACH;;AApCuB;AAsC5BjB,MAAM,CAACQ,SAAP,GAAmB,CAAnB","sourcesContent":["// eslint-disable-next-line @typescript-eslint/ban-ts-comment\n// @ts-nocheck\nimport MutableValue from './MutableValue';\nexport default class Mapper {\n    constructor(module, mapper, inputs = [], outputs = []) {\n        this.dirty = true;\n        this.id = Mapper.MAPPER_ID++;\n        this.inputs = this.extractMutablesFromArray(inputs);\n        this.outputs = this.extractMutablesFromArray(outputs);\n        this.mapper = mapper;\n        const markDirty = () => {\n            this.dirty = true;\n            module.maybeRequestRender();\n        };\n        this.inputs.forEach((input) => {\n            input.addListener(markDirty);\n        });\n    }\n    execute() {\n        this.dirty = false;\n        this.mapper();\n    }\n    extractMutablesFromArray(array) {\n        const res = [];\n        function extractMutables(value) {\n            if (value instanceof MutableValue) {\n                res.push(value);\n            }\n            else if (Array.isArray(value)) {\n                value.forEach((v) => extractMutables(v));\n            }\n            else if (typeof value === 'object') {\n                Object.keys(value).forEach((key) => {\n                    extractMutables(value[key]);\n                });\n            }\n        }\n        extractMutables(array);\n        return res;\n    }\n}\nMapper.MAPPER_ID = 1;\n"]},"metadata":{},"sourceType":"module"}